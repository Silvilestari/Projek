<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

    <title></title>
  </head>
  <body>
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    -->
  </body>
</html>

<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

    <title></title>
  </head>
  <body>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    -->
  </body>
</html>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Kasir Restoran</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body>
    <tr>
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" href="home.php">Restoran</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="home.php">Home</a></li>
                        <li class="nav-item"><a class="nav-link active" href="daftar_menu.php">Daftar Menu</a></li>
                        <li class="nav-item"><a class="nav-link active" href="pembeli.php">Pembeli</a></li>
                        <li class="nav-item"><a class="nav-link active" href="form_beli.php">Pesanan</a></li>
                        <li class="nav-item"><a class="nav-link active" href="login.php">Logout</a></li>
                    </ul>
                </div>
            </div>
        </nav>
                <!-- Header-->
                <header class="bg-dark py-5">
                <div class="text-right text-white">
                    <h1 class="display-7 fw-bolder"><center>Program Pembelian <br>
                Selamat Datang, Selamat berbelanja!</center></h1>
                </div>
            </div>
        </header>
        <br>
    <form action="" name="input" method="post">
        <table><center><b>
                Seblak Kumplit = Rp. 15000 /porsi <br>
                Seblak Ceker = Rp. 10000 /porsi <br>
                Seblak Mie Campur =  Rp. 15000 /porsi <br>
                Seblak Kwetiaw = Rp. 7000 /porsi <br>
                Seblak Kerupuk = Rp. 8000 /porsi <br><br></b>
          
            <tr>
                <td>Nama Pemesan</td>
                <td>
                    <input type="text" name="nama" id="" required>
                </td>
            </tr>
            <tr>
                <td>Pilih Menu</td>
                <td>
                    <input type="text" name="menu" id="" required>
                </td>
            </tr>

            <tr>
                <td>Jumlah Pesanan</td>
                <td>
                    <input type="text" name="jumlah" id="" required> Porsi
                </td>
            </tr>

            <tr>
                <td>Masukan Uang </td>
                <td>
                    <input type="text" name="uang" id="" required>
                </td>
            </tr>

            <tr>
                <td> </td>
                <td>
                    <input type="submit" name="beli" value="Beli">
                </td>
            </tr>

        </table>

<?php
//if isset pertama
if (isset($_POST['beli'])) {
    $nama = @$_POST['nama'];
    $menu= @$_POST['menu'];
    $jumlah = @$_POST['jumlah'];
    $uang = @$_POST['uang'];

    echo "<br>";
    echo "<h3><b>Pembayaran </b></h3>";
    echo " ===================";
    echo "<br> Menu: " . $menu;
    echo "<br> Jumlah: " . $jumlah . " /Porsi";

    class total
    {
        public $bayar, $diskon, $kembalian, $kembalian2, $money, $jmakanan, $makanan;

        public function __construct($uang, $jumlah, $menu)
        {
            $this->money = $uang;
            $this->makanan = $menu;
            $this->jmakanan = $jumlah;
        }

        public function total()
        {
            if ($this->makanan == "seblak1" || $this->makanan == "Seblak Kumplit") {
                $harga1 = 15000;
                $belanja = $harga1 * $this->jmakanan;
                $this->bayar = $belanja;

            } elseif ($this->makanan == "seblak2" || $this->makanan == "Seblak Ceker") {
                $harga2 = 10000;
                $belanja = $harga2 * $this->jmakanan;
                $this->bayar = $belanja;

            } elseif ($this->makanan == "seblak3" || $this->makanan == "Seblak Mie Campur") {
                $harga3 = 15000;
                $belanja = $harga3 * $this->jmakanan;
                $this->bayar = $belanja;

            } elseif ($this->makanan == "seblak4" || $this->makanan == "Seblak Kwetiaw") {
                $harga4 = 7000;
                $belanja = $harga4 * $this->jmakanan;
                $this->bayar = $belanja;

            } elseif ($this->makanan == "seblak5" || $this->makanan == "Seblak Kerupuk") {
                $harga5 = 8000;
                $belanja = $harga5 * $this->jmakanan;
                $this->bayar = $belanja;

            }

            if ($this->bayar >= 100000) {
                $potong = $this->bayar - ($this->bayar * (20 / 100));
                $this->diskon = $potong;
                return "<br>Total: Rp. " . $this->bayar .
                "<br>Diskon 20%, jadi total yang harus dibayar adalah Rp. " . $this->diskon;
            } else {
                return "<br>Total: Rp. " . $this->bayar;
            }

        }

        public function kembali()
        {
            if ($this->money > $this->bayar) {
                $sisa = $this->money - $this->bayar;
                $this->kembalian = $sisa;

                return "<br>Uang anda Rp." . $this->money .
                "<br> Kembalian Rp." . $this->kembalian;

            } elseif ($this->money < $this->bayar) {
              $sisa = $this->money - $this->bayar;
              $this->kembalian = $sisa;

              return "<br>Uang anda Rp." . $this->money .
              "<br> Kurang Rp." . $this->kembalian;

            } elseif ($this->money > $this->diskon) {
                $sisa2 = $this->money - $this->diskon;
                $this->kembalian = $sisa2;

                return "<br>Uang anda Rp." . $this->money .
                "<br> Kembalian Rp." . $this->kurang;

            } elseif ($this->money > $this->diskon) {
              $sisa2 = $this->money - $this->diskon;
              $this->kembalian = $sisa2;

              return "<br>Uang anda Rp." . $this->money .
              "<br> Kurang Rp." . $this->kurang;
        }
      }

        public function __destruct()
        {

            echo "<br>Terima kasih sudah berbelanja!";

        }
    }

    $cek = new total($uang, $jumlah, $menu);
    echo $cek->total();
    echo $cek->kembali();

}
;
?>
        </form>
        <div class="container mt-3">
        <center><a href="daftar_menu.php" class="btn btn-success">Kembali</a></center>
        </div>
    </form>
</body>
</html>